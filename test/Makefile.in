
TARGETS = \
	client@EXEEXT@ \
	sendfile@EXEEXT@ \
	server@EXEEXT@ \
	testfile@EXEEXT@ \
	testflock@EXEEXT@ \
	testproc@EXEEXT@ \
	testsock@EXEEXT@ \
	testthread@EXEEXT@ \
	testtime@EXEEXT@ \
	testargs@EXEEXT@ \
	testcontext@EXEEXT@ \
	testmmap@EXEEXT@ \
	testshmem@EXEEXT@ \
	testpipe@EXEEXT@ \
	testdso@EXEEXT@ \
	testoc@EXEEXT@ \
	testuuid@EXEEXT@ \
	occhild@EXEEXT@ \
	mod_test.so

# bring in rules.mk for standard functionality
@INCLUDE_RULES@

ALL_LIBS=../libapr.la ../shmem/unix/mm/libmm.la $(LIBS)

CLEAN_TARGETS = testfile.tmp

CFLAGS = -g @CFLAGS@ @OPTIM@ $(INCLUDES)

INCDIR=../include
INCLUDES=-I$(INCDIR)


testfile@EXEEXT@: testfile.lo
	$(LINK) testfile.lo $(ALL_LIBS)

testflock@EXEEXT@: testflock.lo
	$(LINK) testflock.lo $(ALL_LIBS)

### why the export-dynamic?
testdso@EXEEXT@: testdso.lo
	$(LINK) --export-dynamic testdso.lo $(ALL_LIBS)

testoc@EXEEXT@: testoc.lo
	$(LINK) testoc.lo $(ALL_LIBS)

occhild@EXEEXT@: occhild.lo
	$(LINK) occhild.lo $(ALL_LIBS)

mod_test.so: mod_test.lo
	$(LINK) --module mod_test.lo

testargs@EXEEXT@: testargs.lo
	$(LINK) testargs.lo $(ALL_LIBS)

testcontext@EXEEXT@: testcontext.lo
	$(LINK) testcontext.lo $(ALL_LIBS)

testproc@EXEEXT@: testproc.lo
	$(LINK) testproc.lo $(ALL_LIBS)

testthread@EXEEXT@: testthread.lo
	$(LINK) testthread.lo $(ALL_LIBS)

testsock@EXEEXT@: testsock.lo client@EXEEXT@ server@EXEEXT@ sendfile@EXEEXT@
	$(LINK) testsock.lo $(ALL_LIBS)

client@EXEEXT@: client.lo
	$(LINK) client.lo $(ALL_LIBS)

server@EXEEXT@: server.lo sendfile.lo
	$(LINK) server.lo $(ALL_LIBS)

sendfile@EXEEXT@: sendfile.lo
	$(LINK) sendfile.lo $(ALL_LIBS)

testtime@EXEEXT@: testtime.lo
	$(LINK) testtime.lo $(ALL_LIBS)

testmmap@EXEEXT@: testmmap.lo
	$(LINK) testmmap.lo $(ALL_LIBS)

testshmem@EXEEXT@: testshmem.lo
	$(LINK) testshmem.lo $(ALL_LIBS)

testpipe@EXEEXT@: testpipe.lo
	$(LINK) testpipe.lo $(ALL_LIBS)

testuuid@EXEEXT@: testuuid.lo
	$(LINK) testuuid.lo $(ALL_LIBS)

# DO NOT REMOVE
